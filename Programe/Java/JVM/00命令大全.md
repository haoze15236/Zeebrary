| 指令                 | 作用                                                         |
| -------------------- | ------------------------------------------------------------ |
| javap -v [className] | 反汇编class文件为更刻可读的指令，可对照[JVM指令手册](./JVM指令手册.pdf) |



# Jinfo:查看配置

```shell
#查看jvm配置
jinfo -flags [pid]
#查看java系统参数
jinfo -sysprops [pid]
```



# jmap:查看对象占用内存情况

此命令可以用来查看内存信息，实例个数以及占用内存大小

![image-20200912115924326](C:/Users/zee/AppData/Roaming/Typora/typora-user-images/image-20200912115924326.png)

打印内存信息到文件中

```shell
jmap -histo [ID] > [文件名]
```

![image-20200912120057616](C:/Users/zee/AppData/Roaming/Typora/typora-user-images/image-20200912120057616.png)

- num：序号
- instances：实例数量
- bytes：占用空间大小
- class name：类名称，[C is a char[]，[S is a short[]，[I is a int[]，[B is a byte[]，[[I is a int[][]

打印当前堆栈信息，可使用JProfiler工具分析

 jmap -dump:format=b,live,file=/data/temp/wtf.hprof 21234

# Jstack：查看线程信息

 

1，打印详细线程信息到文件中

```
jstack -l [pid] > jstack.log
```

2，jstack [pid]

# jstat：查看程序运行状态

## 垃圾回收统计

```
# jstat -gc [pid] [间隔时间(毫秒)] [次数]
jstat -gc 1 2000 100
```

![image-20200912143416967](C:/Users/zee/AppData/Roaming/Typora/typora-user-images/image-20200912143416967.png)

| 字段 | 含义                          |
| ---- | ----------------------------- |
| S0C  | 第一个幸存区的大小，单位KB    |
| S1C  | 第二个幸存区的大小            |
| S0U  | 第一个幸存区的使用大小        |
| S1U  | 第二个幸存区的使用大小        |
| EC   | 伊甸园区的大小                |
| EU   | 伊甸园区的使用大小            |
| OC   | 老年代大小                    |
| OU   | 老年代使用大小                |
| MC   | 方法区大小(元空间)            |
| MU   | 方法区使用大小                |
| CCSC | 压缩类空间大小                |
| CCSU | 压缩类空间使用大小            |
| YGC  | 年轻代垃圾回收次数            |
| YGCT | 年轻代垃圾回收消耗时间，单位s |
| FGC  | 老年代垃圾回收次数            |
| FGCT | 老年代垃圾回收消耗时间，单位s |
| GCT  | 垃圾回收消耗总时间，单位s     |



## 堆内存统计

```shell
jstat -gccapacity [pid] [间隔时间(毫秒)] [次数]
```

![image-20200912143905623](C:/Users/zee/AppData/Roaming/Typora/typora-user-images/image-20200912143905623.png)

NGCMN：新生代最小容量
NGCMX：新生代最大容量
NGC：当前新生代容量
S0C：第一个幸存区大小
S1C：第二个幸存区的大小
EC：伊甸园区的大小
OGCMN：老年代最小容量
OGCMX：老年代最大容量
OGC：当前老年代大小
OC:当前老年代大小
MCMN:最小元数据容量
MCMX：最大元数据容量
MC：当前元数据空间大小
CCSMN：最小压缩类空间大小
CCSMX：最大压缩类空间大小
CCSC：当前压缩类空间大小
YGC：年轻代gc次数
FGC：老年代GC次数